{% extends 'cardapio/base.html' %}

{% block content %}
<!-- Botão voltar -->
<div class="mb-6">
    <a href="{% url 'cardapio:home' %}" class="bg-verde-italiano text-white px-6 py-3 rounded-full font-semibold hover:bg-green-700">
        <i class="fas fa-arrow-left mr-2"></i> Voltar ao Cardápio
    </a>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Lado esquerdo: Foto da pizza -->
    <div class="bg-white rounded-2xl p-6 shadow-2xl border-4 border-dourado">
        {% if pizza.foto %}
        <img src="{{ pizza.foto.url }}" class="w-full h-96 object-cover rounded-xl" alt="{{ pizza.nome }}">
        {% else %}
        <div class="w-full h-96 bg-gray-200 rounded-xl flex items-center justify-center">
            <i class="fas fa-pizza-slice text-8xl text-gray-400"></i>
        </div>
        {% endif %}
    </div>
    
    <!-- Lado direito: Informações -->
    <div class="bg-white rounded-2xl p-8 shadow-2xl border-4 border-dourado">
        <!-- Tipo da pizza -->
        <span class="bg-vermelho-italiano text-white px-4 py-2 rounded-full font-semibold mb-4 inline-block">
            <i class="fas fa-pepper-hot mr-2"></i>{{ pizza.tipo_pizza.nome }}
        </span>
        
        <!-- Nome e descrição -->
        <h1 class="text-4xl font-bold text-marrom-madeira mb-4">{{ pizza.nome }}</h1>
        <p class="text-gray-700 text-lg mb-6">{{ pizza.descricao }}</p>
        
        <!-- Preços explicados -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <!-- Preço base -->
            <div class="bg-blue-100 p-4 rounded-xl text-center">
                <p class="text-sm text-gray-600">Preço da Massa</p>
                <p class="text-2xl font-bold text-blue-600">R$ {{ pizza.preco_base|floatformat:2 }}</p>
            </div>
            
            <!-- Custo dos ingredientes -->
            <div class="bg-green-100 p-4 rounded-xl text-center">
                <p class="text-sm text-gray-600">Custo dos Ingredientes</p>
                <p class="text-2xl font-bold text-green-600">R$ {{ custo_total_ingredientes|floatformat:2 }}</p>
            </div>
        </div>
        
        <!-- Preço total gigante -->
        <div class="text-center mb-6">
            <div class="bg-gradient-to-r from-vermelho-italiano to-red-600 text-white p-6 rounded-2xl">
                <p class="text-lg">Preço Total</p>
                <p class="text-5xl font-bold">R$ {{ pizza.preco_total|floatformat:2 }}</p>
                <p class="text-sm mt-2">
                    <i class="fas fa-clock mr-1"></i> Pronta em {{ pizza.tempo_preparo }} minutos
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Lista detalhada de ingredientes -->
<div class="mt-8 bg-white rounded-2xl p-8 shadow-2xl border-4 border-dourado">
    <h2 class="text-3xl font-bold text-marrom-madeira mb-6 border-b-4 border-dourado pb-2">
        <i class="fas fa-list-ul mr-3"></i> Ingredientes e Preços:
    </h2>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {% for ingrediente_pizza in ingredientes %}
        <div class="bg-gray-50 p-4 rounded-xl border-2 border-gray-200">
            <div class="flex justify-between items-center">
                <!-- Nome do ingrediente -->
                <div>
                    <h3 class="font-bold text-lg text-gray-800">
                        <i class="fas fa-check-circle text-green-500 mr-2"></i>
                        {{ ingrediente_pizza.ingrediente.nome }}
                    </h3>
                    <p class="text-gray-600">{{ ingrediente_pizza.quantidade_display }}</p>
                </div>
                
                <!-- Cálculo do preço -->
                <div class="text-right">
                    <p class="text-xs text-gray-500">
                        {{ ingrediente_pizza.quantidade_numerica }}{{ ingrediente_pizza.ingrediente.unidade_medida }} × 
                        R$ {{ ingrediente_pizza.ingrediente.preco_por_unidade|floatformat:3 }}
                    </p>
                    <p class="text-xl font-bold text-vermelho-italiano">
                        R$ {{ ingrediente_pizza.custo_ingrediente|floatformat:2 }}
                    </p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Modo de preparo -->
<div class="mt-8 bg-white rounded-2xl p-8 shadow-2xl border-4 border-dourado">
    <h2 class="text-3xl font-bold text-marrom-madeira mb-6 border-b-4 border-dourado pb-2">
        <i class="fas fa-utensils mr-3"></i> Como Fazemos:
    </h2>
    <div class="bg-yellow-50 p-6 rounded-xl">
        <div class="flex items-start">
            <i class="fas fa-chef-hat text-dourado text-3xl mr-4 mt-1"></i>
            <div class="text-gray-800 text-lg">{{ pizza.modo_preparo|linebreaks }}</div>
        </div>
    </div>
</div>

<!-- Mensagem da Nonna -->
<div class="mt-8 text-center bg-gradient-to-r from-yellow-100 to-orange-100 p-8 rounded-2xl border-2 border-dourado">
    <p class="text-gray-700 text-xl italic">
        <i class="fas fa-quote-left mr-2 text-dourado"></i>
        "Ogni pizza è fatta con amore!"
        <i class="fas fa-quote-right ml-2 text-dourado"></i>
    </p>
    <p class="text-marrom-madeira font-semibold mt-2">- SENAC PIZZA</p>
</div>
{% endblock %}